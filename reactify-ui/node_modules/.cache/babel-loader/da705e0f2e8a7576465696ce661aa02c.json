{"ast":null,"code":"var _jsxFileName = \"/home/neeraj/Desktop/the-artcles/src/components/Navbar/navbar.js\";\nimport React from \"react\";\nimport './navbar.css';\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { notifications, userLogin } from \"../../Store/actions/actions\";\nimport { axios, url, wsUrl } from \"../../Store/actions/actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass navbar extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: this.props.notifications.data,\n      quantity: this.props.notifications.quantity\n    };\n\n    this.componentDidMount = () => {\n      this.loadNotificationsWithAxios();\n      this.realTimeNotifications();\n      console.log('navbar...........');\n    };\n\n    this.seen = slug => {\n      const data = {\n        slug: slug\n      };\n      let endpoint = `notification/seen/`;\n      let token = this.props.user.token;\n      axios.post(endpoint, data, token).then(res => {\n        let responseData = res.data;\n\n        if (responseData.success) {\n          this.loadNotificationsWithAxios();\n        }\n\n        ;\n      });\n    };\n\n    this.realTimeNotifications = async () => {\n      var ws_scheme = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n      var ws_path = ws_scheme + '://' + window.location.host + \":8001/\";\n      console.log({\n        'ws_path': ws_path\n      });\n      let ws = await new WebSocket(`${wsUrl}ws/notify/${this.props.user.username}`);\n      ws.onopen = await function () {\n        console.log('Websocket connection open...');\n      };\n      ws.addEventListener('message', event => {\n        let parseData = JSON.parse(event.data);\n        this.props.userNotificationHandler({\n          data: parseData.msg,\n          quantity: parseData.msg[0].quantity\n        });\n        console.log({\n          'message recieved.....': parseData.msg\n        });\n      });\n\n      ws.onerror = function (event) {\n        console.log('Websocket error occurred...', event);\n      };\n\n      ws.onclose = function (event) {\n        console.log('Websocket closed...', event);\n      };\n    };\n\n    this.loadNotificationsWithAxios = () => {\n      let endpoint = `notification/`;\n      let token = this.props.user.token;\n      axios.get(endpoint, token).then(res => {\n        let responseData = res.data;\n        this.props.userNotificationHandler({\n          data: responseData.notifications,\n          quantity: responseData.quantity\n        });\n      });\n    };\n\n    this.logout = () => {\n      window.localStorage.clear();\n      this.props.userLoginHandler({\n        undefined\n      });\n      this.props.userNotificationHandler({\n        undefined\n      });\n    };\n  }\n\n  render() {\n    let username = this.props.user.username;\n    let quantity = this.props.notifications.quantity;\n    let login = this.props.user.login;\n    let notifications = this.props.notifications.data;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"NavBody\",\n        children: /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"navbar navbar-dark navbar-expand-lg navigationWrap startHeader startStyle\",\n          style: {\n            backgroundColor: \"black\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-fluid cuCon\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"navbar-brand\",\n              href: \"#\",\n              children: \"Navbar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"navbar-toggler\",\n              type: \"button\",\n              \"data-toggle\": \"collapse\",\n              \"data-target\": \"#navbarNavDropdown\",\n              \"aria-controls\": \"navbarNavDropdown\",\n              \"aria-expanded\": \"false\",\n              \"aria-label\": \"Toggle navigation\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"navbar-toggler-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"collapse navbar-collapse\",\n              id: \"navbarNavDropdown\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"navbar-nav ml-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/\",\n                    className: \"nav-link nav_link_2\",\n                    children: [\"Home \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"sr-only\",\n                      children: \"(current)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 77\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: '/dashboard/' + username,\n                    className: \"nav-link nav_link_2\",\n                    children: \"Dashboard\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/about\",\n                    className: \"nav-link nav_link_2\",\n                    children: \"About\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4 dropdown\",\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    to: username ? null : '/login',\n                    className: \"nav-link nav_link_2 dropdown-toggle dropdown_toggle_2\",\n                    id: \"navbarDropdownMenuLink\",\n                    role: \"button\",\n                    \"aria-expanded\": \"false\",\n                    children: username ? username : 'Login/Signup'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 27\n                  }, this), username ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"dropdown-menu dropdown_menu_2\",\n                    \"aria-labelledby\": \"navbarDropdownMenuLink\",\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"dropdown-item dropdown_item_2\",\n                      children: \"Accounts\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"dropdown-item  dropdown_item_2\",\n                      href: \"#\",\n                      children: \"Another action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"dropdown-item  dropdown_item_2\",\n                      onClick: this.logout,\n                      style: {\n                        cursor: 'pointer'\n                      },\n                      children: \"Logout\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 31\n                  }, this) : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 23\n                }, this), login ? /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4 dropdown\",\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    to: '',\n                    className: \"nav-link nav_link_2 dropdown-toggle dropdown_toggle_2\",\n                    id: \"navbarDropdownMenuLink\",\n                    role: \"button\",\n                    \"aria-expanded\": \"false\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: url + 'media/images/bell2.png',\n                      height: '28px'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 31\n                    }, this), quantity || quantity > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"notiDot\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"notiDotText\",\n                        id: \"notiDotText\",\n                        children: quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 137,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 33\n                    }, this) : null]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"dropdown-menu dropdown_menu_2 noti\",\n                    \"aria-labelledby\": \"navbarDropdownMenuLink\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                      id: \"notiQuantity\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 35\n                    }, this), notifications ? notifications.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"notifications-item\",\n                      style: {\n                        backgroundColor: item.seen ? 'white' : 'rgba(255,227,227,0.82)'\n                      },\n                      onClick: e => {\n                        this.seen(item.slug);\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        className: \"notiImage\",\n                        src: item.image_url,\n                        alt: \"img\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 39\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"notiText\",\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            style: {\n                              fontWeight: 'bold'\n                            },\n                            children: item.username\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 154,\n                            columnNumber: 46\n                          }, this), ' ' + item.text]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 154,\n                          columnNumber: 43\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: item.msg\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 155,\n                          columnNumber: 43\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"notiTime\",\n                          children: item.time_stamp\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 156,\n                          columnNumber: 43\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 39\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 39\n                    }, this)) : null]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 25\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.userData.cardData,\n  notifications: state.notificationData.notifyData\n});\n\nconst mapDispatchToProps = dispatch => ({\n  userLoginHandler: data => dispatch(userLogin(data)),\n  userNotificationHandler: data => dispatch(notifications(data))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(navbar);","map":{"version":3,"sources":["/home/neeraj/Desktop/the-artcles/src/components/Navbar/navbar.js"],"names":["React","Link","connect","notifications","userLogin","axios","url","wsUrl","navbar","Component","state","data","props","quantity","componentDidMount","loadNotificationsWithAxios","realTimeNotifications","console","log","seen","slug","endpoint","token","user","post","then","res","responseData","success","ws_scheme","window","location","protocol","ws_path","host","ws","WebSocket","username","onopen","addEventListener","event","parseData","JSON","parse","userNotificationHandler","msg","onerror","onclose","get","logout","localStorage","clear","userLoginHandler","undefined","render","login","backgroundColor","cursor","map","item","index","e","image_url","fontWeight","text","time_stamp","mapStateToProps","userData","cardData","notificationData","notifyData","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport './navbar.css'\nimport {Link} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {notifications, userLogin} from \"../../Store/actions/actions\";\nimport {axios, url, wsUrl} from \"../../Store/actions/actions\";\n\nclass navbar extends React.Component {\n\n    state = {\n        data: this.props.notifications.data,\n        quantity: this.props.notifications.quantity,\n    }\n\n    componentDidMount = () => {\n        this.loadNotificationsWithAxios()\n        this.realTimeNotifications()\n        console.log('navbar...........')\n    };\n\n    seen = (slug) => {\n        const data = {\n            slug: slug\n        }\n        let endpoint = `notification/seen/`\n        let token = this.props.user.token\n\n        axios\n            .post(endpoint, data, token)\n            .then((res)=>{\n                    let responseData = res.data;\n                    if (responseData.success) {\n                        this.loadNotificationsWithAxios()\n                    };\n                })\n\n    }\n\n    realTimeNotifications = async () => {\n        var ws_scheme = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n        var ws_path = ws_scheme + '://' + window.location.host + \":8001/\";\n        console.log({'ws_path': ws_path})\n        let ws = await new WebSocket(`${wsUrl}ws/notify/${this.props.user.username}`)\n\n        ws.onopen = await function () {\n            console.log('Websocket connection open...')\n        }\n\n        ws.addEventListener('message', (event) => {\n            let parseData = JSON.parse(event.data)\n            this.props.userNotificationHandler({\n                data: parseData.msg,\n                quantity: parseData.msg[0].quantity\n            })\n            console.log({'message recieved.....':parseData.msg})\n        })\n\n        ws.onerror = function (event) {\n            console.log('Websocket error occurred...', event)\n        }\n\n        ws.onclose = function (event) {\n            console.log('Websocket closed...', event)\n        }\n    };\n\n    loadNotificationsWithAxios = () => {\n        let endpoint = `notification/`\n        let token = this.props.user.token\n\n        axios\n            .get(endpoint, token)\n            .then((res)=>{\n                    let responseData = res.data;\n                    this.props.userNotificationHandler({\n                        data: responseData.notifications,\n                        quantity: responseData.quantity\n                    })\n                })\n    }\n\n    logout = () =>{\n        window.localStorage.clear();\n        this.props.userLoginHandler({undefined})\n        this.props.userNotificationHandler({undefined})\n    };\n\n    render() {\n        let username = this.props.user.username\n        let quantity = this.props.notifications.quantity\n        let login = this.props.user.login\n        let notifications = this.props.notifications.data\n\n        return(\n            <>\n                <div className=\"NavBody\">\n                    <nav className=\"navbar navbar-dark navbar-expand-lg navigationWrap startHeader startStyle\" style={{backgroundColor: \"black\"}}>\n                        <div className=\"container-fluid cuCon\">\n                    <a className=\"navbar-brand\" href=\"#\">Navbar</a>\n                    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n                          data-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\"\n                          aria-label=\"Toggle navigation\">\n                      <span className=\"navbar-toggler-icon\"></span>\n                    </button>\n                    <div className=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\n                    <ul className=\"navbar-nav ml-auto\">\n                      <li className=\"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\" >\n                          <Link to='/' className=\"nav-link nav_link_2\">Home <span className=\"sr-only\">(current)</span></Link>\n                      </li>\n                      <li className=\"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\">\n                          <Link to= {'/dashboard/'+ username} className=\"nav-link nav_link_2\" >Dashboard</Link>\n                      </li>\n                      <li className=\"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4\">\n                          <Link to='/about' className=\"nav-link nav_link_2\">About</Link>\n                      </li>\n                      <li className=\"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4 dropdown\">\n                          <Link to={username?null:'/login'} className=\"nav-link nav_link_2 dropdown-toggle dropdown_toggle_2\" id=\"navbarDropdownMenuLink\" role=\"button\"\n                             aria-expanded=\"false\">\n                              {username?username:'Login/Signup'}\n                          </Link>\n\n                          {username?\n                              <div className=\"dropdown-menu dropdown_menu_2\" aria-labelledby=\"navbarDropdownMenuLink\">\n                                  <a className=\"dropdown-item dropdown_item_2\">Accounts</a>\n                                  <a className=\"dropdown-item  dropdown_item_2\" href=\"#\">Another action</a>\n                                  <a className=\"dropdown-item  dropdown_item_2\" onClick={this.logout} style={{cursor: 'pointer'}}>Logout</a>\n                              </div>\n                          :null}\n                      </li>\n                      {login?\n                        <li className=\"nav-item nav-item_2 pl-4 pl-md-0 ml-0 ml-md-4 dropdown\">\n                          <Link to={''} className=\"nav-link nav_link_2 dropdown-toggle dropdown_toggle_2\" id=\"navbarDropdownMenuLink\" role=\"button\"\n                             aria-expanded=\"false\">\n                              <img src={url+'media/images/bell2.png'} height={'28px'}/>\n                              {quantity || quantity > 0?\n                                <span className=\"notiDot\">\n                                <p className='notiDotText' id='notiDotText'>{quantity}</p>\n                              </span>\n                              :null}\n                          </Link>\n                              <div className=\"dropdown-menu dropdown_menu_2 noti\" aria-labelledby=\"navbarDropdownMenuLink\">\n                                  <h6 id='notiQuantity'></h6>\n                                  <hr/>\n\n                                  {notifications?notifications.map((item, index) =>(\n                                      <div className=\"notifications-item\"\n                                           style={{backgroundColor: item.seen?'white':'rgba(255,227,227,0.82)'}}\n                                           onClick={(e) => {\n                                               this.seen(item.slug);\n                                           }\n                                      }>\n                                      <img className=\"notiImage\" src={item.image_url} alt=\"img\"/>\n                                      <div className=\"notiText\">\n                                          <p><span style={{fontWeight:'bold'}}>{item.username}</span>{' '+item.text}</p>\n                                          <p>{item.msg}</p>\n                                          <p className='notiTime'>{item.time_stamp}</p>\n\n                                      </div>\n                                  </div>\n                                  )):null}\n                              </div>\n                      </li>\n                      :null}\n                    </ul>\n                    </div>\n                    </div>\n                    </nav>\n                </div>\n            </>\n        );\n\n    }\n}\n\nconst mapStateToProps = state =>({\n    user:state.userData.cardData,\n    notifications:state.notificationData.notifyData\n})\n\nconst mapDispatchToProps = dispatch => ({\n    userLoginHandler: data => dispatch(userLogin(data)),\n    userNotificationHandler: data => dispatch(notifications(data)),\n})\n\nexport default connect(mapStateToProps,mapDispatchToProps)(navbar)\n"]},"metadata":{},"sourceType":"module"}