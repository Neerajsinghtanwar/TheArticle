{"ast":null,"code":"var _jsxFileName = \"/home/neeraj/Desktop/the-artcles/src/components/Article/EditArticle.js\";\nimport React from \"react\";\nimport { CKEditor } from \"ckeditor4-react\";\nimport { connect } from \"react-redux\";\nimport { axios } from \"../../Store/actions/actions\";\nimport '../HomePage/Home.css';\nimport $ from \"jquery\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditArticle extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      show: false,\n      content: null,\n      thumbnail: null,\n      title: null,\n      description: null,\n      category: null,\n      categories: null\n    };\n\n    this.componentDidMount = () => {\n      this.loadCategories();\n      this.loadArticleInstance();\n    };\n\n    this.handleFileSelected = e => {\n      const files = e.target.files[0];\n      console.log(files);\n      this.setState({\n        thumbnail: files\n      });\n    };\n\n    this.loadCategories = () => {\n      let endpoint = `create-article`;\n      let token = this.props.user.token;\n      axios.get(endpoint, token).then(response => {\n        const responseData = response.data;\n        this.setState({\n          categories: responseData.category\n        });\n      });\n    };\n\n    this.loadArticleInstance = () => {\n      let url = window.location.pathname;\n      url = url.split(\"/\");\n      let id = url[url.length - 1];\n      let endpoint = `edit-article/${id}`;\n      let token = this.props.user.token;\n      axios.get(endpoint, token).then(response => {\n        const responseData = response.data.blog[0];\n        this.setState({\n          title: responseData.title\n        });\n        this.setState({\n          category: responseData.category\n        });\n        this.setState({\n          description: responseData.description\n        });\n        this.setState({\n          content: responseData.content\n        }); // this.setState({thumbnail: responseData.thumbnail})\n      });\n    };\n\n    this.save = () => {\n      let data = new FormData();\n\n      if (this.state.title === null) {\n        document.getElementById(\"titlevalid\").innerText = \"*this field is required\";\n      } else {\n        document.getElementById(\"titlevalid\").innerText = \"\";\n      }\n\n      if (this.state.description == null) {\n        document.getElementById(\"descvalid\").innerText = \"*this field is required\";\n      } else {\n        document.getElementById(\"descvalid\").innerText = \"\";\n      }\n\n      if (this.state.content == null) {\n        document.getElementById(\"contentvalid\").innerText = \"*this field is required\";\n      } else {\n        document.getElementById(\"contentvalid\").innerText = \"\";\n      }\n\n      if (this.state.title !== null && this.state.description !== null && this.state.content !== null) {\n        data.append(\"title\", this.state.title);\n        data.append(\"category\", this.state.category);\n        data.append(\"user\", this.props.user.username);\n        data.append(\"description\", this.state.description);\n        data.append(\"thumbnail\", this.state.thumbnail);\n        data.append(\"content\", this.state.content);\n        let url = window.location.pathname;\n        url = url.split(\"/\");\n        let id = url[url.length - 1];\n        let endpoint = `edit-article/${id}`;\n        let token = this.props.user.token;\n        axios.patch(endpoint, data, token).then(response => {\n          const responseData = response.data;\n          let msg = responseData.error || responseData.msg;\n\n          if (responseData.success) {\n            document.getElementById(\"last_updated\").className = \"alert alert-success\";\n            document.getElementById(\"last_updated\").innerText = msg;\n            window.scrollTo(0, 0);\n          } else {\n            document.getElementById(\"last_updated\").className = \"alert alert-danger\";\n            document.getElementById(\"last_updated\").innerText = msg;\n            window.scrollTo(0, 0);\n          }\n        });\n      }\n    };\n\n    this.showOutput = () => {\n      this.setState({\n        show: !this.state.show\n      });\n    };\n  }\n\n  render() {\n    const show = this.state.show;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\",\n          position: \"relative\",\n          width: \"100%\"\n        },\n        id: \"last_updated\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        style: {\n          padding: \"35px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-header container\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"today\",\n            children: \"Edit Article\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"-70px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"myBtn\",\n            onClick: this.showOutput,\n            id: \"btn1995\",\n            children: this.state.show ? \"Hide Output\" : \"Show Output\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: this.state.show ? \"row\" : null,\n          style: {\n            textAlign: \"center\",\n            marginTop: \"130px\"\n          },\n          id: \"live_editor\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"myDIV\",\n            className: this.state.show ? \"col-sm-6\" : \"container\",\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Title:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: this.state.title,\n              onChange: e => this.setState({\n                title: e.target.value\n              }),\n              id: \"title_write_article\",\n              className: \"form-control\",\n              placeholder: \"Title\",\n              \"aria-label\": \"Recipient's username\",\n              \"aria-describedby\": \"basic-addon2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"red\",\n                textAlign: \"left\"\n              },\n              id: \"titlevalid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"browser-default custom-select\",\n              onChange: e => this.setState({\n                category: e.target.value\n              }),\n              children: [this.state.categories ? this.state.categories.map((item, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item,\n                selected: this.state.category === item ? this.state.category : null,\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)) : null, \";\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: this.state.description,\n              id: \"description_write_article\",\n              className: \"form-control\",\n              onChange: e => this.setState({\n                description: e.target.value\n              }),\n              placeholder: \"Concise and catchy description of your article in 250 characters\",\n              \"aria-label\": \"Recipient's username\",\n              \"aria-describedby\": \"basic-addon2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"red\",\n                textAlign: \"left\"\n              },\n              id: \"descvalid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Content:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), this.state.content ? /*#__PURE__*/_jsxDEV(CKEditor, {\n              initData: this.state.content,\n              config: {\n                extraPlugins: [\"justify\", \"showblocks\", \"preview\", \"font\", \"div\", \"colorbutton\", \"autogrow\", \"image\", \"flash\", \"smiley\", \"iframe\", \"find\", \"filebrowser\", \"uploadimage\"],\n                filebrowserUploadMethod: \"form\",\n                filebrowserImageUploadUrl: \"/upload/\"\n              },\n              type: \"classic\",\n              onResize: () => $(\"#cke_editor1\").css(\"width\", \"100%\"),\n              onChange: evt => this.setState({\n                content: evt.editor.getData()\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"red\",\n                textAlign: \"left\"\n              },\n              id: \"contentvalid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Thumbnail:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              name: \"file\",\n              id: \"file\",\n              accept: \"image/x-png,image/gif,image/jpeg\",\n              onChange: this.handleFileSelected\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"red\",\n                textAlign: \"left\"\n              },\n              id: \"thumbnailvalid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onClick: this.save,\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              value: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), show ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"myText col-sm-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Output\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"800px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: \"justify\"\n                },\n                dangerouslySetInnerHTML: {\n                  __html: this.state.content\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 19\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\n;\n\nconst mapStateToProps = state => ({\n  user: state.userData.cardData\n});\n\nexport default connect(mapStateToProps)(EditArticle);","map":{"version":3,"sources":["/home/neeraj/Desktop/the-artcles/src/components/Article/EditArticle.js"],"names":["React","CKEditor","connect","axios","$","EditArticle","Component","state","show","content","thumbnail","title","description","category","categories","componentDidMount","loadCategories","loadArticleInstance","handleFileSelected","e","files","target","console","log","setState","endpoint","token","props","user","get","then","response","responseData","data","url","window","location","pathname","split","id","length","blog","save","FormData","document","getElementById","innerText","append","username","patch","msg","error","success","className","scrollTo","showOutput","render","textAlign","position","width","padding","marginTop","value","color","map","item","index","extraPlugins","filebrowserUploadMethod","filebrowserImageUploadUrl","css","evt","editor","getData","height","__html","mapStateToProps","userData","cardData"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { CKEditor } from \"ckeditor4-react\";\nimport { connect } from \"react-redux\";\nimport {axios} from \"../../Store/actions/actions\";\nimport '../HomePage/Home.css'\nimport $ from \"jquery\";\n\nclass EditArticle extends React.Component {\n\n  state = {\n    show: false,\n    content: null,\n    thumbnail: null,\n    title: null,\n    description: null,\n    category: null,\n    categories: null,\n\n  };\n\n  componentDidMount = () => {\n    this.loadCategories()\n    this.loadArticleInstance()\n\n  }\n\n  handleFileSelected = (e) => {\n    const files = e.target.files[0];\n    console.log(files)\n    this.setState({thumbnail: files});\n  };\n\n  loadCategories = () => {\n    let endpoint = `create-article`\n    let token = this.props.user.token\n\n    axios\n      .get(endpoint, token)\n      .then((response) => {\n\n      const responseData = response.data;\n      this.setState({categories: responseData.category})\n    });\n  };\n\n  loadArticleInstance = () => {\n    let url = window.location.pathname;\n\n    url = url.split(\"/\");\n    let id = url[url.length - 1];\n    let endpoint = `edit-article/${id}`\n    let token = this.props.user.token\n\n    axios\n      .get(endpoint, token)\n      .then((response) => {\n\n      const responseData = response.data.blog[0];\n      this.setState({title: responseData.title})\n      this.setState({category: responseData.category})\n      this.setState({description: responseData.description})\n      this.setState({content: responseData.content})\n      // this.setState({thumbnail: responseData.thumbnail})\n\n    });\n  };\n\n  save = () => {\n    let data = new FormData();\n\n    if (this.state.title === null) {\n      document.getElementById(\"titlevalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"titlevalid\").innerText = \"\";\n    }\n    if (this.state.description == null) {\n      document.getElementById(\"descvalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"descvalid\").innerText = \"\";\n    }\n    if (this.state.content == null) {\n      document.getElementById(\"contentvalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"contentvalid\").innerText = \"\";\n    }\n    if (\n        this.state.title !== null &&\n        this.state.description !== null &&\n        this.state.content !== null\n    ) {\n\n      data.append(\"title\", this.state.title);\n      data.append(\"category\", this.state.category);\n      data.append(\"user\", this.props.user.username);\n      data.append(\"description\", this.state.description);\n      data.append(\"thumbnail\", this.state.thumbnail);\n      data.append(\"content\", this.state.content);\n\n      let url = window.location.pathname;\n\n      url = url.split(\"/\");\n      let id = url[url.length - 1];\n\n      let endpoint = `edit-article/${id}`\n      let token = this.props.user.token\n\n      axios\n        .patch(endpoint, data, token)\n        .then((response) => {\n\n        const responseData = response.data;\n        let msg = responseData.error || responseData.msg\n        if (responseData.success) {\n          document.getElementById(\"last_updated\").className =\n              \"alert alert-success\";\n          document.getElementById(\"last_updated\").innerText = msg;\n          window.scrollTo(0, 0);\n        } else {\n          document.getElementById(\"last_updated\").className =\n              \"alert alert-danger\";\n          document.getElementById(\"last_updated\").innerText = msg;\n          window.scrollTo(0, 0);\n        }\n      });\n    }\n\n  };\n\n  showOutput = () => {\n    this.setState({show: !this.state.show})\n  };\n\n  render() {\n    const show = this.state.show\n    return (\n        <div>\n          <div\n              style={{textAlign: \"center\", position: \"relative\", width: \"100%\"}}\n              id=\"last_updated\"\n          />\n\n          <div className=\"container-fluid\" style={{padding: \"35px\"}}>\n\n            <div className=\"section-header container\">\n                <h1 className=\"today\">Edit Article</h1>\n            </div>\n\n            <div style={{marginTop: \"-70px\"}}>\n              <button\n                  className=\"myBtn\"\n\n                  onClick={this.showOutput}\n                  id=\"btn1995\"\n              >\n                {this.state.show ? \"Hide Output\" : \"Show Output\"}\n              </button>\n              </div>\n\n            <div className={this.state.show ? \"row\" : null}\n                style={{textAlign: \"center\", marginTop: \"130px\"}}\n                id=\"live_editor\"\n            >\n              <div id=\"myDIV\" className={this.state.show ? \"col-sm-6\" : \"container\"}>\n                <br/>\n                <label>Title:</label>\n                <input\n                    type=\"text\"\n                    value={this.state.title}\n                    onChange={(e) => this.setState({title: e.target.value})}\n                    id=\"title_write_article\"\n                    className=\"form-control\"\n                    placeholder=\"Title\"\n                    aria-label=\"Recipient's username\"\n                    aria-describedby=\"basic-addon2\"\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"titlevalid\"></p>\n                <br/>\n                <label>Category:</label>\n                <select className=\"browser-default custom-select\" onChange={(e) => this.setState({category: e.target.value})} >\n                  {this.state.categories?this.state.categories.map((item, index) => (\n                  <option value={item} selected={this.state.category===item?this.state.category:null}>{item}</option>\n                  )):null};\n                </select>\n                <br/>\n                <br/>\n                <br/>\n                <label>Description:</label>\n                <input\n                    type=\"text\"\n                    value={this.state.description}\n                    id=\"description_write_article\"\n                    className=\"form-control\"\n                    onChange={(e)=>this.setState({description: e.target.value})}\n                    placeholder=\"Concise and catchy description of your article in 250 characters\"\n                    aria-label=\"Recipient's username\"\n                    aria-describedby=\"basic-addon2\"\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"descvalid\"></p>\n                <br/>\n\n                <label>Content:</label>\n                {this.state.content?\n                <CKEditor\n                    initData={this.state.content}\n                    config={{\n                      extraPlugins: [\n                        \"justify\",\n                        \"showblocks\",\n                        \"preview\",\n                        \"font\",\n                        \"div\",\n                        \"colorbutton\",\n                        \"autogrow\",\n                        \"image\",\n                        \"flash\",\n                        \"smiley\",\n                        \"iframe\",\n                        \"find\",\n                        \"filebrowser\",\n                        \"uploadimage\",\n                      ],\n                      filebrowserUploadMethod: \"form\",\n                      filebrowserImageUploadUrl: \"/upload/\",\n                    }}\n                    type=\"classic\"\n                    onResize={() => $(\"#cke_editor1\").css(\"width\", \"100%\")}\n                    onChange={(evt) => this.setState({content: evt.editor.getData()})}\n                />\n                :null}\n\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"contentvalid\"/>\n                <br/>\n\n                <label>Thumbnail:</label>\n                <input\n                    type=\"file\"\n                    name=\"file\"\n                    id=\"file\"\n                    accept=\"image/x-png,image/gif,image/jpeg\"\n                    onChange={this.handleFileSelected}\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"thumbnailvalid\" ></p>\n                <br/>\n\n                <input\n                    onClick={this.save}\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    value=\"Save\"\n                />\n                <br/>\n                <br/>\n                <br/>\n              </div>\n\n              {show ? (\n                  <div className=\"myText col-sm-6\">\n                    <br/>\n                    <h3>Output</h3>\n                    <hr/>\n                    <div style={{height: \"800px\"}}>\n                      <div\n                          style={{textAlign: \"justify\"}}\n                          dangerouslySetInnerHTML={{__html: this.state.content}}\n                      ></div>\n                    </div>\n                  </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n    );\n  };\n};\n\nconst mapStateToProps = state =>({\n    user:state.userData.cardData\n})\n\nexport default connect(mapStateToProps)(EditArticle);"]},"metadata":{},"sourceType":"module"}