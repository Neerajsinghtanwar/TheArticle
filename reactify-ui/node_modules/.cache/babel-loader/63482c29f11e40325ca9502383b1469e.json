{"ast":null,"code":"import _classCallCheck from\"/home/neeraj/Desktop/the-artcles/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/neeraj/Desktop/the-artcles/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/neeraj/Desktop/the-artcles/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/neeraj/Desktop/the-artcles/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{CKEditor}from\"ckeditor4-react\";import{connect}from\"react-redux\";import{axios}from\"../../Store/actions/actions\";import'../HomePage/Home.css';import $ from\"jquery\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditArticle=/*#__PURE__*/function(_React$Component){_inherits(EditArticle,_React$Component);var _super=_createSuper(EditArticle);function EditArticle(){var _this;_classCallCheck(this,EditArticle);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={show:false,content:null,thumbnail:null,title:null,description:null,category:null,categories:null};_this.componentDidMount=function(){_this.loadCategories();_this.loadArticleInstance();};_this.handleFileSelected=function(e){var files=e.target.files[0];console.log(files);_this.setState({thumbnail:files});};_this.loadCategories=function(){var endpoint=\"create-article\";var token=_this.props.user.token;axios.get(endpoint,token).then(function(response){var responseData=response.data;_this.setState({categories:responseData.category});});};_this.loadArticleInstance=function(){var url=window.location.pathname;url=url.split(\"/\");var id=url[url.length-1];var endpoint=\"edit-article/\".concat(id);var token=_this.props.user.token;axios.get(endpoint,token).then(function(response){var responseData=response.data.blog[0];_this.setState({title:responseData.title});_this.setState({category:responseData.category});_this.setState({description:responseData.description});_this.setState({content:responseData.content});// this.setState({thumbnail: responseData.thumbnail})\n});};_this.save=function(){var data=new FormData();if(_this.state.title===null){document.getElementById(\"titlevalid\").innerText=\"*this field is required\";}else{document.getElementById(\"titlevalid\").innerText=\"\";}if(_this.state.description==null){document.getElementById(\"descvalid\").innerText=\"*this field is required\";}else{document.getElementById(\"descvalid\").innerText=\"\";}if(_this.state.content==null){document.getElementById(\"contentvalid\").innerText=\"*this field is required\";}else{document.getElementById(\"contentvalid\").innerText=\"\";}if(_this.state.title!==null&&_this.state.description!==null&&_this.state.content!==null){data.append(\"title\",_this.state.title);data.append(\"category\",_this.state.category);data.append(\"user\",_this.props.user.username);data.append(\"description\",_this.state.description);data.append(\"thumbnail\",_this.state.thumbnail);data.append(\"content\",_this.state.content);var url=window.location.pathname;url=url.split(\"/\");var id=url[url.length-1];var endpoint=\"edit-article/\".concat(id);var token=_this.props.user.token;axios.patch(endpoint,data,token).then(function(response){var responseData=response.data;var msg=responseData.error||responseData.msg;if(responseData.success){document.getElementById(\"last_updated\").className=\"alert alert-success\";document.getElementById(\"last_updated\").innerText=msg;window.scrollTo(0,0);}else{document.getElementById(\"last_updated\").className=\"alert alert-danger\";document.getElementById(\"last_updated\").innerText=msg;window.scrollTo(0,0);}});}};_this.showOutput=function(){_this.setState({show:!_this.state.show});};return _this;}_createClass(EditArticle,[{key:\"render\",value:function render(){var _this2=this;var show=this.state.show;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",position:\"relative\",width:\"100%\"},id:\"last_updated\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",style:{padding:\"35px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header container\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"today\",children:\"Edit Article\"})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"-70px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"myBtn\",onClick:this.showOutput,id:\"btn1995\",children:this.state.show?\"Hide Output\":\"Show Output\"})}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.show?\"row\":null,style:{textAlign:\"center\",marginTop:\"130px\"},id:\"live_editor\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"myDIV\",className:this.state.show?\"col-sm-6\":\"container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.title,onChange:function onChange(e){return _this2.setState({title:e.target.value});},id:\"title_write_article\",className:\"form-control\",placeholder:\"Title\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"left\"},id:\"titlevalid\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"browser-default custom-select\",onChange:function onChange(e){return _this2.setState({category:e.target.value});},children:[this.state.categories?this.state.categories.map(function(item,index){return/*#__PURE__*/_jsx(\"option\",{value:item,selected:_this2.state.category===item?_this2.state.category:null,children:item});}):null,\";\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.description,id:\"description_write_article\",className:\"form-control\",onChange:function onChange(e){return _this2.setState({description:e.target.value});},placeholder:\"Concise and catchy description of your article in 250 characters\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"left\"},id:\"descvalid\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Content:\"}),this.state.content?/*#__PURE__*/_jsx(CKEditor,{initData:this.state.content,config:{extraPlugins:[\"justify\",\"showblocks\",\"preview\",\"font\",\"div\",\"colorbutton\",\"autogrow\",\"image\",\"flash\",\"smiley\",\"iframe\",\"find\",\"filebrowser\",\"uploadimage\"],filebrowserUploadMethod:\"form\",filebrowserImageUploadUrl:\"/upload/\"},type:\"classic\",onResize:function onResize(){return $(\"#cke_editor1\").css(\"width\",\"100%\");},onChange:function onChange(evt){return _this2.setState({content:evt.editor.getData()});}}):null,/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"left\"},id:\"contentvalid\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Thumbnail:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",id:\"file\",accept:\"image/x-png,image/gif,image/jpeg\",onChange:this.handleFileSelected}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"left\"},id:\"thumbnailvalid\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onClick:this.save,type:\"submit\",className:\"btn btn-primary\",value:\"Save\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),show?/*#__PURE__*/_jsxs(\"div\",{className:\"myText col-sm-6\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Output\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"800px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"justify\"},dangerouslySetInnerHTML:{__html:this.state.content}})})]}):null]})]})]});}}]);return EditArticle;}(React.Component);;var mapStateToProps=function mapStateToProps(state){return{user:state.userData.cardData};};export default connect(mapStateToProps)(EditArticle);","map":{"version":3,"sources":["/home/neeraj/Desktop/the-artcles/src/components/Article/EditArticle.js"],"names":["React","CKEditor","connect","axios","$","EditArticle","state","show","content","thumbnail","title","description","category","categories","componentDidMount","loadCategories","loadArticleInstance","handleFileSelected","e","files","target","console","log","setState","endpoint","token","props","user","get","then","response","responseData","data","url","window","location","pathname","split","id","length","blog","save","FormData","document","getElementById","innerText","append","username","patch","msg","error","success","className","scrollTo","showOutput","textAlign","position","width","padding","marginTop","value","color","map","item","index","extraPlugins","filebrowserUploadMethod","filebrowserImageUploadUrl","css","evt","editor","getData","height","__html","Component","mapStateToProps","userData","cardData"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { CKEditor } from \"ckeditor4-react\";\nimport { connect } from \"react-redux\";\nimport {axios} from \"../../Store/actions/actions\";\nimport '../HomePage/Home.css'\nimport $ from \"jquery\";\n\nclass EditArticle extends React.Component {\n\n  state = {\n    show: false,\n    content: null,\n    thumbnail: null,\n    title: null,\n    description: null,\n    category: null,\n    categories: null,\n\n  };\n\n  componentDidMount = () => {\n    this.loadCategories()\n    this.loadArticleInstance()\n\n  }\n\n  handleFileSelected = (e) => {\n    const files = e.target.files[0];\n    console.log(files)\n    this.setState({thumbnail: files});\n  };\n\n  loadCategories = () => {\n    let endpoint = `create-article`\n    let token = this.props.user.token\n\n    axios\n      .get(endpoint, token)\n      .then((response) => {\n\n      const responseData = response.data;\n      this.setState({categories: responseData.category})\n    });\n  };\n\n  loadArticleInstance = () => {\n    let url = window.location.pathname;\n\n    url = url.split(\"/\");\n    let id = url[url.length - 1];\n    let endpoint = `edit-article/${id}`\n    let token = this.props.user.token\n\n    axios\n      .get(endpoint, token)\n      .then((response) => {\n\n      const responseData = response.data.blog[0];\n      this.setState({title: responseData.title})\n      this.setState({category: responseData.category})\n      this.setState({description: responseData.description})\n      this.setState({content: responseData.content})\n      // this.setState({thumbnail: responseData.thumbnail})\n\n    });\n  };\n\n  save = () => {\n    let data = new FormData();\n\n    if (this.state.title === null) {\n      document.getElementById(\"titlevalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"titlevalid\").innerText = \"\";\n    }\n    if (this.state.description == null) {\n      document.getElementById(\"descvalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"descvalid\").innerText = \"\";\n    }\n    if (this.state.content == null) {\n      document.getElementById(\"contentvalid\").innerText =\n          \"*this field is required\";\n    } else {\n      document.getElementById(\"contentvalid\").innerText = \"\";\n    }\n    if (\n        this.state.title !== null &&\n        this.state.description !== null &&\n        this.state.content !== null\n    ) {\n\n      data.append(\"title\", this.state.title);\n      data.append(\"category\", this.state.category);\n      data.append(\"user\", this.props.user.username);\n      data.append(\"description\", this.state.description);\n      data.append(\"thumbnail\", this.state.thumbnail);\n      data.append(\"content\", this.state.content);\n\n      let url = window.location.pathname;\n\n      url = url.split(\"/\");\n      let id = url[url.length - 1];\n\n      let endpoint = `edit-article/${id}`\n      let token = this.props.user.token\n\n      axios\n        .patch(endpoint, data, token)\n        .then((response) => {\n\n        const responseData = response.data;\n        let msg = responseData.error || responseData.msg\n        if (responseData.success) {\n          document.getElementById(\"last_updated\").className =\n              \"alert alert-success\";\n          document.getElementById(\"last_updated\").innerText = msg;\n          window.scrollTo(0, 0);\n        } else {\n          document.getElementById(\"last_updated\").className =\n              \"alert alert-danger\";\n          document.getElementById(\"last_updated\").innerText = msg;\n          window.scrollTo(0, 0);\n        }\n      });\n    }\n\n  };\n\n  showOutput = () => {\n    this.setState({show: !this.state.show})\n  };\n\n  render() {\n    const show = this.state.show\n    return (\n        <div>\n          <div\n              style={{textAlign: \"center\", position: \"relative\", width: \"100%\"}}\n              id=\"last_updated\"\n          />\n\n          <div className=\"container-fluid\" style={{padding: \"35px\"}}>\n\n            <div className=\"section-header container\">\n                <h1 className=\"today\">Edit Article</h1>\n            </div>\n\n            <div style={{marginTop: \"-70px\"}}>\n              <button\n                  className=\"myBtn\"\n\n                  onClick={this.showOutput}\n                  id=\"btn1995\"\n              >\n                {this.state.show ? \"Hide Output\" : \"Show Output\"}\n              </button>\n              </div>\n\n            <div className={this.state.show ? \"row\" : null}\n                style={{textAlign: \"center\", marginTop: \"130px\"}}\n                id=\"live_editor\"\n            >\n              <div id=\"myDIV\" className={this.state.show ? \"col-sm-6\" : \"container\"}>\n                <br/>\n                <label>Title:</label>\n                <input\n                    type=\"text\"\n                    value={this.state.title}\n                    onChange={(e) => this.setState({title: e.target.value})}\n                    id=\"title_write_article\"\n                    className=\"form-control\"\n                    placeholder=\"Title\"\n                    aria-label=\"Recipient's username\"\n                    aria-describedby=\"basic-addon2\"\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"titlevalid\"></p>\n                <br/>\n                <label>Category:</label>\n                <select className=\"browser-default custom-select\" onChange={(e) => this.setState({category: e.target.value})} >\n                  {this.state.categories?this.state.categories.map((item, index) => (\n                  <option value={item} selected={this.state.category===item?this.state.category:null}>{item}</option>\n                  )):null};\n                </select>\n                <br/>\n                <br/>\n                <br/>\n                <label>Description:</label>\n                <input\n                    type=\"text\"\n                    value={this.state.description}\n                    id=\"description_write_article\"\n                    className=\"form-control\"\n                    onChange={(e)=>this.setState({description: e.target.value})}\n                    placeholder=\"Concise and catchy description of your article in 250 characters\"\n                    aria-label=\"Recipient's username\"\n                    aria-describedby=\"basic-addon2\"\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"descvalid\"></p>\n                <br/>\n\n                <label>Content:</label>\n                {this.state.content?\n                <CKEditor\n                    initData={this.state.content}\n                    config={{\n                      extraPlugins: [\n                        \"justify\",\n                        \"showblocks\",\n                        \"preview\",\n                        \"font\",\n                        \"div\",\n                        \"colorbutton\",\n                        \"autogrow\",\n                        \"image\",\n                        \"flash\",\n                        \"smiley\",\n                        \"iframe\",\n                        \"find\",\n                        \"filebrowser\",\n                        \"uploadimage\",\n                      ],\n                      filebrowserUploadMethod: \"form\",\n                      filebrowserImageUploadUrl: \"/upload/\",\n                    }}\n                    type=\"classic\"\n                    onResize={() => $(\"#cke_editor1\").css(\"width\", \"100%\")}\n                    onChange={(evt) => this.setState({content: evt.editor.getData()})}\n                />\n                :null}\n\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"contentvalid\"/>\n                <br/>\n\n                <label>Thumbnail:</label>\n                <input\n                    type=\"file\"\n                    name=\"file\"\n                    id=\"file\"\n                    accept=\"image/x-png,image/gif,image/jpeg\"\n                    onChange={this.handleFileSelected}\n                />\n                <p style={{color: \"red\", textAlign: \"left\"}} id=\"thumbnailvalid\" ></p>\n                <br/>\n\n                <input\n                    onClick={this.save}\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    value=\"Save\"\n                />\n                <br/>\n                <br/>\n                <br/>\n              </div>\n\n              {show ? (\n                  <div className=\"myText col-sm-6\">\n                    <br/>\n                    <h3>Output</h3>\n                    <hr/>\n                    <div style={{height: \"800px\"}}>\n                      <div\n                          style={{textAlign: \"justify\"}}\n                          dangerouslySetInnerHTML={{__html: this.state.content}}\n                      ></div>\n                    </div>\n                  </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n    );\n  };\n};\n\nconst mapStateToProps = state =>({\n    user:state.userData.cardData\n})\n\nexport default connect(mapStateToProps)(EditArticle);"]},"metadata":{},"sourceType":"module"}